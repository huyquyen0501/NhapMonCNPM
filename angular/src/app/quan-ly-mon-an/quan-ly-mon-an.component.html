<div [@routerTransition]>
    <section class="content-header">
        <div class="container-fluid">
            <div class="row">
                <div class="col-6">
                    <h1>Quản lý món ăn</h1>
                </div>
                <div class="col-6 text-right">
                    <button class="btn-add" (click)="add()">Thêm mới</button>
                </div>
            </div>
        </div>
    </section>
    <section class="content px-2 search">
        <div class="container-fluid">
            <div class="card">
                <form>
                    <div class="row">
                        <div class="col-md-3">
                            <label>Tên món ăn</label>
                            <input [(ngModel)]="tenMonAn" name="tenMonAn" type="text">
                        </div>
                        <div class="col-md-3">
                            <label>Đơn giá</label>
                            <input [(ngModel)]="donGia" name="donGia" type="text">
                        </div>
                        <div class="col-md-3">
                            <label>Nguyên liệu</label>
                            <input [(ngModel)]="nguyenLieu" name="nguyenLieu" type="text">
                        </div>
                        <div class="col-md-3">
                            <button class="btn-search" (click)="search()">Tìm kiếm</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
    <section class="content px-2">
        <div class="container-fluid">
            <div class="card">
                <h2 class="title">Danh sách món ăn</h2>
                <div class="card-body table-responsive p-0">
                    <table>
                        <tr>
                            <th>STT</th>
                            <th>Tên món ăn</th>
                            <th>Đơn giá</th>
                            <th>Nguyên liệu</th>
                            <th>Đơn vị</th>
                            <th>Hình ảnh</th>
                            <th style="width: 150px;">Thao tác</th>
                        </tr>
                        <tr
                            *ngFor="let data of (dsMonAn |paginate: {id: 'server', itemsPerPage: pageSize, currentPage: pageNumber, totalItems: totalItems}); let index = index">
                            <td>{{index + 1 + (pageNumber - 1) * pageSize}}</td>
                            <td>{{data.tenMonan}}</td>
                            <td>{{data.giaMon}}</td>
                            <td>
                                <span *ngFor="let nl of data.danhsachNguyenLieu">
                                    {{nl.tenNguyenLieu}}
                                </span>
                            </td>
                            <td>
                                {{viewDonVi(data.donViTinh)}}
                            </td>
                            <td>
                                <img id= "myImg" src="{{data.hinhAnh}}" height="50px" alt="">
                            </td>
                            <td>
                                <button style="background: blue ; color: white; border: none; margin-right: 10px;"
                                    (click)="edit(data)">Sửa</button>
                                <button style="background: #333 ; color: white; border: none;"
                                    (click)="CFNguyenLieu(data)">Nguyên liệu</button>
                            </td>
                        </tr>
                        <div class="pagination">
                            <abp-pagination-controls id="server" (pageChange)="getDataPage($event)">
                            </abp-pagination-controls>
                        </div>
                    </table>
                    <div id="myModal" class="modal">
                        <span class="close">&times;</span>
                        <img class="modal-content" id="img01">
                        <div id="caption"></div>
                      </div>
                      
                </div>
            </div>
        </div>
        <script>
            // Get the modal
            var modal = document.getElementById("myModal");
            
            // Get the image and insert it inside the modal - use its "alt" text as a caption
            var img = document.getElementById("myImg");
            var modalImg = document.getElementById("img01");
            var captionText = document.getElementById("caption");
            img.onclick = function(){
              modal.style.display = "block";
              modalImg.src = this.src;
              captionText.innerHTML = this.alt;
            }
            
            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];
            
            // When the user clicks on <span> (x), close the modal
            span.onclick = function() { 
              modal.style.display = "none";
            }
            </script>
    </section>
</div>